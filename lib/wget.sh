#!/bin/bash
# Posters: '20000','40000','60000','80000','100000','120000','140000','160000','180000','200000','250000','300000','350000','400000','450000','500000','550000','600000','650000','700000','750000','800000','850000','900000','950000','1000000','1100000','1200000','1300000'
# Stills: 1,2,3,4,5,6,7,8,9,10,11,12

# Paste to netlify command
NUM=20000; mkdir -p public; wget -qc -O movies.json https://pleer.video/posters/$NUM.json; node -e "const fs = require('fs'); let ids = []; const open = require('./movies.json'); Object.keys(open).forEach(id => {ids.push(id + ' ' + open[id]);}); fs.writeFile('./movies.txt', ids.join('\n'), function (err) { console.log('SAVE movies.txt', ids.length); });"; tr -d '\r' < movies.txt > parse.txt; while read url; do ARR=($url); nohup wget -qc --user-agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36/8mqQhSuL-09" -O ./public/${ARR[0]}.jpg ${ARR[1]} & nohup wget -qc --user-agent="Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4230.1 Safari/537.36" --header="Accept: text/html,applica
tion/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8" -O ./public/${ARR[0]}.webp ${ARR[1]} & echo ${ARR[0]} ${ARR[1]}; done < parse.txt; cd public && tar -czf $NUM.jpg.tar.gz *.jpg && rm -rf ./*.jpg && tar -czf $NUM.webp.tar.gz *.webp && rm -rf ./*.webp; echo "<div style='background: #161822;color: #dad7d7;margin: 20px auto;text-align: center;font-size: 20px;width: 300px;border-radius: 10px;padding: 10px;border: 5px #dad7d7 solid;font-family: Verdana;'><a href='/$NUM.jpg.tar.gz' style='color: #dad7d7;text-align: center;font-size: 20px;font-family: Verdana;'>$NUM.jpg.tar.gz</a><br><br><a href='/$NUM.webp.tar.gz' style='color: #dad7d7;text-align: center;font-size: 20px;font-family: Verdana;'>$NUM.webp.tar.gz</a></div>" > index.html;

# Paste to netlify command
NUM=1; mkdir -p public; wget -qc -O movies.json https://pleer.video/stills/$NUM.json; node -e "const fs = require('fs'); let ids = []; const open = require('./movies.json'); Object.keys(open).forEach(id => {ids.push(id + ' ' + open[id]);}); fs.writeFile('./movies.txt', ids.join('\n'), function (err) { console.log('SAVE movies.txt', ids.length); });"; tr -d '\r' < movies.txt > parse.txt; while read url; do ARR=($url); nohup wget -qc --user-agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36/8mqQhSuL-09" -O ./public/${ARR[0]}.jpg ${ARR[1]} & echo ${ARR[0]} ${ARR[1]}; done < parse.txt; cd public && tar -czf still$NUM.jpg.tar.gz *.jpg && rm -rf ./*.jpg; echo "<div style='background: #161822;color: #dad7d7;margin: 20px auto;text-align: center;font-size: 20px;width: 300px;border-radius: 10px;padding: 10px;border: 5px #dad7d7 solid;font-family: Verdana;'><a href='/still$NUM.jpg.tar.gz' style='color: #dad7d7;text-align: center;font-size: 20px;font-family: Verdana;'>still$NUM.jpg.tar.gz</a></div>" > index.html;

# rm -f p.txt; wget https://pastebin.com/raw/Nf9UsLqS -qO p.txt; while IFS= read -r line; do wget $line -qO p.tar.gz; tar xzvf p.tar.gz --directory poster; rm p.tar.gz; done < p.txt

# rm -f s.txt; wget https://pastebin.com/raw/DRjTAsEy -qO s.txt; while IFS= read -r line; do wget $line -qO s.tar.gz; tar xzvf s.tar.gz --directory still; rm s.tar.gz; done < s.txt
